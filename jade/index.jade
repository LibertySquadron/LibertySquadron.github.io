doctype html
- var now_ts = parseInt(new Date().getTime() / 1000)

html
  head
    title Liberty Squadron Ban League Builder
    meta(charset="utf-8")

    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    meta(property="og:url", content="http://raithos.github.io/")
    meta(property="og:image", content="http://raithos.github.io/images/preview.png")
    meta(property="og:description", content="YASB 2.0 is a simple, fast, and easy to use squad builder for X-Wing Miniatures by Fantasy Flight Games.")

    link(rel="apple-touch-icon", sizes="180x180", href="apple-touch-icon.png")
    link(rel="icon", type="image/png", sizes="32x32", href="favicon-32x32.png")
    link(rel="icon", type="image/png", sizes="16x16", href="favicon-16x16.png")
    link(rel="manifest", href="site.webmanifest")
    link(rel="shortcut icon", type="image/x-icon", href="favicon.ico")

    link(rel="stylesheet", href=`bower_components/select2/select2.css?${now_ts}`)
    link(rel="stylesheet", href=`bootstrap/css/bootstrap.css?${now_ts}`)

    link(rel="stylesheet", href=`stylesheets/xwing.css?${now_ts}`)
    link(rel="stylesheet", href=`stylesheets/xwing-screen.css?${now_ts}`, media="screen")
    link(rel="stylesheet", href=`stylesheets/xwing-print.css?${now_ts}`, media="print")
    link(rel="stylesheet", href=`stylesheets/backgrounds.css?${now_ts}`, media="screen")
    link(rel="stylesheet", href=`fonts/xwing-miniatures.css?${now_ts}`, media="screen,print")
    link(rel="stylesheet", href=`bower_components/font-awesome/css/all.min.css?${now_ts}`)


  body
    // body layout
    script(async='', src='https://www.googletagmanager.com/gtag/js?id=UA-123324723-1&aip=1')
    script.
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

    .tabbable.d-print-none
      ul.nav.nav-pills.main-top-nav-bar
        li
          a#rebelTab('data-toggle'="tab", href='#rebelContent') <i class="xwing-miniatures-font xwing-miniatures-font-rebel"></i>
        li
          a#empireTab('data-toggle'="tab", href='#empireContent') <i class="xwing-miniatures-font xwing-miniatures-font-empire"></i>
        li
          a#scumTab('data-toggle'="tab", href='#scumContent') <i class="xwing-miniatures-font xwing-miniatures-font-scum"></i>
        li
          a#resistanceTab('data-toggle'="tab", href='#resistanceContent') <i class="xwing-miniatures-font xwing-miniatures-font-rebel-outline"></i>
        li
          a#firstorderTab('data-toggle'="tab", href='#firstorderContent') <i class="xwing-miniatures-font xwing-miniatures-font-firstorder"></i>
        li
          a#republicTab('data-toggle'="tab", href='#republicContent') <i class="xwing-miniatures-font xwing-miniatures-font-republic"></i>
        li
          a#separatistTab('data-toggle'="tab", href='#separatistContent') <i class="xwing-miniatures-font xwing-miniatures-font-separatists"></i>
       
        li.main-top-nav-bar-button-right
          a(href='https://discord.gg/nvXS8YT', target="_blank") League Discord   
        li.main-top-nav-bar-button-right
          a#aboutTab('data-toggle'="tab", href='#aboutContent') About    
        li.main-top-nav-bar-button-right
          a#browserTab('data-toggle'="tab", href='#browserContent') Card Browser    
        li.main-top-nav-bar-button-right
          a#rulesTab('data-toggle'="tab", href='#aboutRules') Ban League Rules    
        li.main-top-nav-bar-button-right
          a#bannedTab('data-toggle'="tab", href='#aboutBanned') Banned Cards                   
      .tab-content
        .tab-pane.fade#rebelContent
          #rebel-builder
        .tab-pane.fade#empireContent
          #empire-builder
        .tab-pane.fade#scumContent
          #scum-builder
        .tab-pane.fade#resistanceContent
          #resistance-builder
        .tab-pane.fade#firstorderContent
          #firstorder-builder
        .tab-pane.fade#republicContent
          #republic-builder
        .tab-pane.fade#separatistContent
          #separatist-builder
        .tab-pane.fade#browserContent
          #card-browser
        .tab-pane.fade#rulesBrowserContent
          #rules-browser
        .tab-pane.fade#aboutContent
          .container-fluid
            .row-fluid
              .span8.about
                .image-block
                    img(src="android-chrome-192x192.png", height="100", width="100")
                    h2 YASB for X-Wing 2.0
                :markdown
                    **This is a modified version of YASB 2.0 for use in the Liberty Squadron Ban League. More information about YASB 2.0 can be found below.**

                    YASB 2.0 is a simple, fast, no-frills squad builder for [X-Wing Miniatures](http://www.fantasyflightgames.com/edge_minisite.asp?eidm=174&enmi=X-Wing) by [Fantasy Flight Games](http://www.fantasyflightgames.com/index.asp).  

                    It is pure HTML, JavaScript, and CSS and requires no backend, and can be dropped into place on any website (with maybe a few CSS tweaks).

                    YASB 2.0 updated and maintained by Stephen Kim.

                    2.0 launch data thanks to Evan Cameron, Jonathan Hon, Devon Monkhouse, and Mark Stewart.
                    
                    Translation Team: Patrick Mischke, godgremos, Cl√©ment Bourgoin, ManuelWittke

                    Site logo by Thomas Kohler

                    Based on the amazing original [Yet Another Squad Builder](https://geordanr.github.io/xwing/)

                    Icons and fonts courtesy GeckoTH's excellent PSD, available on [A Few Maneuvers](http://www.afewmaneuvers.com/forums/viewtopic.php?f=28&t=183).
					
                    X-Wing symbols font courtesy [Hinny](https://github.com/Hinny) and [Josh Derksen](https://github.com/armoredgear7).

                    Fancy printout design inspired by TheKestrel on the FFG forums.

                    Maneuver dial functionality by [hpanderson](https://github.com/hpanderson).

                    Upgrade card text integrated into printouts by [wffurr](https://github.com/wffurr).

                    Squad name in the permalink and obstacles choice modal by [zacharyp](https://github.com/zacharyp).

                    This builder is unofficial and is not affiliated with Fantasy Flight Games, Lucasfilm Ltd., or Disney.

                    Do you want to donate? Many people have bothered me to add a donate button so here it is! Please don't feel obligated to donate for using this site just because this button is here. This site will always be free, and always 100% available for all people to use.
                p
                    button(class='btn btn-primary paypal', onclick="window.open('https://paypal.me/raithos');") Donate?
        .tab-pane#aboutRules
          .container-fluid
            .row-fluid
              .span8
                .image-block
                    img(src="android-chrome-192x192.png", height="100", width="100")
                    h2 Liberty Squadron Ban League Rules
                :markdown
                  ### About
                    **Start Date:** May 31  
                    **Format:** Extended  
                    **Length:** 12 Weeks  
                    **Pods:** Every 3 weeks, 8 players per pod, pods will repair after completion  
                    **Bans:** Happen every week, last for 2 weeks  4
                    **Eligible to ban:**  pilots, ships, and upgrades. Usage and performance will increase a cards chances to be banned but will ultimately be decided randomly. Ex. Fenn rau was used 20 times out of 100 pilots. His chances of being banned are approximately 20%. (Not the exact maths we are using just an example)  
                    **Round Length:** 1 week to complete each round. 75 minute game on TTS  
                    **Rounds End:** Sunday 8pm EST  
                    **Pairings Up:** Mondays  
                    **Ban List Up:** Mondays  
  
                  ### Sign Up  
                    [Sign up using this google form.](https://docs.google.com/forms/d/e/1FAIpQLScgWz8ymW8yAaed6SQXp7V2-N95AmbXfCOlO-OTxsPrxLVhhg/viewform?fbzx=8693587550640418556)  
        .tab-pane#aboutBanned
          .container-fluid
            .row-fluid
              .span8
                h2 Banned Cards
                :markdown
                  Banned cards will not be visible in the squad builder.

                  ### Week 1
                    - Boba Fett
                    - Fenn Rau (scum)
                    - Darth Vader (pilot)
                    - Whisper
                    - Poe Dameron
                    - Zizi Tlo
                    - Kylo Ren (Pilot)
                    - Luke Skywalker (Pilot)
                    - Braylen Stramm
                    - Anakin Skywalker (Delta-7 Aethersprite)
                    - Obi-Wan Kenobi
                    - Captain Sear
                    - Trade Federation Drone
                    - Proton Torpedoes
                    - R2 Astromech

                  ### Week 2 
                  **All Cards from Week 1 remain banned**  
                    **Pilots**  
                      - Wedge Antilles   
                      - Ten Numb   
                      - Non Lumb   
                      - Finn    
                      - Old Teroch   
                    **Upgrades**   
                      - Crack Shot   
                      - Fire-Control System   
                      - Proximity Mines   
                    **Ships**  
                      - Kihraxz Fighter   
                      - TIE Interceptor     
 
                  ### Week 3   
                    **All Cards from Week 1 and 2 remain banned**    
                      **Pilots**    
                        - Guri   
                        - Mace Windu   
                        - Epsilon Squadron Cadet  
                        - Luminara Unduli
                        - General Grievious           
                      **Upgrades**     
                        - Contraband Cybernetics  
                        - Outmaneuver   
                        - Advanced Optics   
                      **Ships**    
                        - YT-1300 (Resistance)       
                        - TIE Defender    
  
                  ### Week 4  
                    **UNLOCKED**    
                      - Kihraxz Fighter  
                      - TIE Interceptor  
                      - Ten Numb  
                      - Wedge Antilles  
                      - Nom Lumb  
                      - Old Teroch  
                      - Finn (pilot)  
                      - Proximity Mines  
                      - FCS  
                      - Darth Vader  
                      - Luke Skywalker  
                      - Anakin Skywalker      
                    **Pilots**      
                      - Grand Inquisitor    
                      - Inquisitor  
                      - Cartel Spacer  
                      - Skull Squadron          
                    **Upgrades**     
                      - Trick Shot  
                      - Autoblasters  
                      - Moldy Crow  
                      - Heroic   
                    **Ships**    
                      - TIE/FO  
                      - HWK-290 (Rebel)  
                    **POD 2 SPECIFIC BANS**   
                      - Soontir Fel   
                      - Afterburners   
                      - Passive Sensors   
                      - Maul (crew)   
                      - Delta-7B   
                      - R5 Astromech    
                    
                  ### Week 5    
                    **UNLOCKED**      
                      - TIE Defender  
                      - Scavenged YT-1300 (Resistance)  
                      - Guri  
                      - Poe Dameron  
                      - Luminara Unduli  
                      - Mace Windu  
                      - General Grievous  
                      - Captain Sear    
                      - Advanced Optics  
                      - Outmaneuver  
                      - Contraband Cybernetics    
                    **BANNED**     
                      **Pilots**        
                        - Ten Numb  
                        - Old Teroch  
                        - Fifth Brother  
                        - Wedge Antilles  
                        - Torani Kulda             
                      **Upgrades**       
                        - Fire-Control System  
                        - Ion Cannon Turret  
                        - Plasma Torpedoes   
                      **Ships**        
                        - U-Wing  
                        - T-70 (Except Poe Dameron)

                  ### Week 6     
                    **UNLOCKED**        
                      - Grand Inquisitor  
                      - Inquisitor  
                      - Cartel Spacer  
                      - Skull Squadron Pilot  
                      - Trick Shot  
                      - Autoblasters  
                      - Moldy Crow
                      - Heroic  
                      - TIE/FO  
                      - HWK-290 (Rebel)  
                      - Slave I  
                    **BANNED**       
                      **Pilots**          
                        - Poe Dameron  
                        - Rexler Brath  
                        - Techno Union bomber  
                        - Scimitar Squadron Pilot  
                        - Zeta Squadron Survivor               
                      **Upgrades**         
                        - Outmaneuver    
                        - Proximity Mines    
                        - R4 Astromech    
                      **Ships**        
                        - T-65 X-wing  
                        - Delta-7 Aethersprite  

                  ### Week 7       
                    **UNLOCKED**          
                      - Fifth Brother  
                      - Torani Kulda  
                      - Ion Cannon Turret  
                      - Plasma Torpedoes  
                      - UTD-600 U-Wing  
                      - T-70 (Except Poe Dameron)   
                    **BANNED**         
                      **Pilots**            
                        - Greer Sonnel  
                        - Tallison Lintra  
                        - Guri  
                        - Academy Pilot                
                      **Upgrades**           
                        - Advanced Optics  
                        - Shield Upgrade  
                        - Trick Shot  
                        - Perceptive Copilot      
                      **Ships**        
                        - YT-2400    
                        - M3-A Syck    
                          
                  ### Week 8         
                    **UNLOCKED**            
                      - Rexler Brath  
                      - Techno Union Bomber  
                      - Scimitar Squadron Pilot  
                      - Zeta Squadron Survivor  
                      - Zizi tlo  
                      - R4 Astromech  
                      - Slave I  
                      - Maul  
                      - T-65 X-Wing  
                      - Delta-7 Aethersprite    
                    **BANNED**           
                      **Pilots**              
                        - Inquisitor    
                        - Red Squadron Expert (T-70)  
                        - Colonel Jendon    
                        - Boba Fett                
                      **Upgrades**             
                        - Hull Upgrade  
                        - Heroic  
                        - Advanced Proton Torpedoes  
                        - Intimidation       
                      **Ships**            
                        - Vulture-Class Starfighter  
                        - Fang Fighter  

                  ### Week 9          
                    **UNLOCKED**              
                      - Greer Sonnel  
                      - Tallison Lintra  
                      - Academy Pilot  
                      - Shield Upgrade  
                      - Perceptive Copilot  
                      - YT-2400  
                      - M3-A Interceptor    
                    **BANNED**             
                      **Pilots**                
                        - Broadside  
                        - 104th Battalion Pilot  
                        - Rey  
                        - Mace Windu               
                      **Upgrades**               
                        - Ion Cannon Turret  
                        - Calibrated Laser Targeting  
                        - Contraband Cybernetics  
                        - Predator     
                      **Ships**              
                        - T65 X-Wing    
                        - TIE/FO  
    
    .footer
      .msie8-hax

    #printable.d-none.d-print-block
      .printable-header
      .printable-body
      .printable-footer
        | Created at
        strong.site-placeholder

    // JS linkages
    script(src=`bower_components/jquery/js/jquery.js?${now_ts}`)
    script(src=`bower_components/jquery-ajaxtransport-xdomainrequest/jquery.xdomainrequest.min.js?${now_ts}`)
    script(src=`bower_components/jquery.qrcode/js/jquery-qrcode.min.js?${now_ts}`)
    script(src=`bower_components/select2/select2.js?${now_ts}`)

    script(src=`https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js` integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous")
    script(src=`bootstrap/js/bootstrap.js?${now_ts}`)
	
    script(src=`javascripts/translations.min.js?${now_ts}`)
    script(src=`javascripts/xwing.min.js?${now_ts}`)
    script(src=`javascripts/xwingcontent.min.js?${now_ts}`)
    script(src=`javascripts/translations.min.js?${now_ts}`)
	
    script
      :coffee-script
        $ ->
          window.setupTranslationSupport()

          switch window.location.hash
            when '#rebelContent'
              window.location.replace '?f=Rebel Alliance'
            when '#empireContent'
              window.location.replace '?f=Galactic Empire'
            when '#scumContent'
              window.location.replace '?f=Scum and Villainy'
            when '#resistanceContent'
              window.location.replace '?f=Resistance'
            when '#firstorderContent'
              window.location.replace '?f=First Order'
            when '#republicContent'
              window.location.replace '?f=Galactic Republic'
            when '#separatistContent'
              window.location.replace '?f=Separatist Alliance'

          $('.site-placeholder').text """http://\#{window.location.host}\#{window.location.pathname}"""
          $('#rebelTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/rebels'
              page_title: 'Rebel Alliance'
          $('#empireTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/empire'
              page_title: 'Galactic Empire'
          $('#scumTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/scum'
              page_title: 'Scum and Villainy'
          $('#resistanceTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/resistance'
              page_title: 'Resistance'
          $('#firstorderTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/firstorder'
              page_title: 'First Order'
          $('#firstorderTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/republic'
              page_title: 'Galactic Republic'
          $('#firstorderTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/separatist'
              page_page_title: 'Separatist Alliance'
          $('#browserTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/browser'
              page_title: 'Card Browser'
          $('#rulesTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/rules-browser'
              page_title: 'Rules'
          $('#aboutTab').click (e) ->
            gtag 'config', 'UA-123324723-1',
              page_path: '/about'
              page_title: 'About'

          window.rebel_sb = new window.SquadBuilder
              tab: '#rebelTab'
              faction: 'Rebel Alliance'
              container: '#rebel-builder'
              printable_container: '#printable'
          window.registerBuilderForTranslation window.rebel_sb

          window.empire_sb = new window.SquadBuilder
              tab: '#empireTab'
              faction: 'Galactic Empire'
              container: '#empire-builder'
              printable_container: '#printable'
          window.registerBuilderForTranslation window.empire_sb

          window.scum_sb = new window.SquadBuilder
              tab: '#scumTab'
              faction: 'Scum and Villainy'
              container: '#scum-builder'
              printable_container: '#printable'
          window.registerBuilderForTranslation window.scum_sb

          window.resistance_sb = new window.SquadBuilder
              tab: '#resistanceTab'
              faction: 'Resistance'
              container: '#resistance-builder'
              printable_container: '#printable'
          window.registerBuilderForTranslation window.resistance_sb

          window.firstorder_sb = new window.SquadBuilder
              tab: '#firstorderTab'
              faction: 'First Order'
              container: '#firstorder-builder'
              printable_container: '#printable'
          window.registerBuilderForTranslation window.firstorder_sb
          
          window.republic_sb = new window.SquadBuilder
              tab: '#republicTab'
              faction: 'Galactic Republic'
              container: '#republic-builder'
              printable_container: '#printable'
          window.registerBuilderForTranslation window.republic_sb

          window.separatist_sb = new window.SquadBuilder
              tab: '#separatistTab'
              faction: 'Separatist Alliance'
              container: '#separatist-builder'
              printable_container: '#printable'
          window.registerBuilderForTranslation window.separatist_sb

          switch $.getParameterByName 'f'
            when 'Rebel Alliance'
                gtag 'config', 'UA-123324723-1',
                  page_path: '/rebels'
                  page_page_title: 'Rebel Alliance'
                $('#rebelTab').tab 'show'
            when 'Galactic Empire'
                gtag 'config', 'UA-123324723-1',
                  page_path: '/empire'
                  page_title: 'Galactic Empire'
                $('#empireTab').tab 'show'
            when 'Scum and Villainy'
                gtag 'config', 'UA-123324723-1',
                  page_path: '/scum'
                  page_title: 'Scum and Villainy'
                $('#scumTab').tab 'show'
            when 'Resistance'
                gtag 'config', 'UA-123324723-1',
                  page_path: '/resistance'
                  page_title: 'Resistance'
                $('#resistanceTab').tab 'show'
            when 'First Order'
                gtag 'config', 'UA-123324723-1',
                  page_path: '/firstorder'
                  page_title: 'First Order'
                $('#firstorderTab').tab 'show'
            when 'Galactic Republic'
                gtag 'config', 'UA-123324723-1',
                  page_path: '/republic'
                  page_title: 'Galactic Republic'
                $('#republicTab').tab 'show'
            when 'Separatist Alliance'
                gtag 'config', 'UA-123324723-1',
                  page_path: '/separatist'
                  page_title: 'Separatist Alliance'
                $('#separatistTab').tab 'show'
            else
                gtag 'config', 'UA-123324723-1',
                  page_path: '/default'
                  page_title: 'Rebel Alliance'
                $('#rebelTab').tab 'show'

          window.backend = new SquadBuilderBackend
              server: 'https://yasb-backend.herokuapp.com'
              builders: [
                window.rebel_sb
                window.empire_sb
                window.scum_sb
                window.resistance_sb
                window.firstorder_sb
                window.republic_sb
                window.separatist_sb
              ]
              login_logout_button: '#login-logout'
              auth_status: '#auth-status'

          window.browser = new CardBrowser
              container: '#card-browser'

          window.browser = new RulesBrowser
              container: '#rules-browser'

          window.backend.getSettings (settings) ->
              window.backend.getLanguagePreference settings, (language) ->
                $(window).trigger 'xwing:languageChanged', language

          window.setupTranslationUI window.backend

          window.xws = new XWSManager
              container: '#xws'

          if (window.location.href.indexOf('https:') != 0) and ((navigator.userAgent.indexOf('MSIE 8') > -1) or (navigator.userAgent.indexOf('MSIE 9') > -1))
              $('.msie8-hax').html '''
                  Trouble logging in? Try clicking <a href="#">here</a> first.
              '''
              $('.msie8-hax a').click (e) ->
                  e.preventDefault()
                  window.location.href = window.location.href.replace(/^http:/, 'https:')

    #xws

    .font-hax
      span(style="font-family: BankGothicHD")
        | &nbsp;
      span(style="font-family: kimberley")
        | &nbsp;
      span(style="font-family: XWing")
        | &nbsp;
      span(style="font-family: XWingShip")
        | &nbsp;


